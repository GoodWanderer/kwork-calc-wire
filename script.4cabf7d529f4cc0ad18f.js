/*! For license information please see script.4cabf7d529f4cc0ad18f.js.LICENSE.txt */
!function(){var e={768:function(){const e=document.querySelectorAll(".colors-preview__img"),t=document.querySelector(".popup-zoom"),s=document.querySelector("body");e.forEach((e=>{e.addEventListener("click",(()=>{t.querySelector("img").src=e.querySelector("img").src,t.classList.remove("off"),s.classList.add("_lock")}))})),t.querySelector(".popup-zoom__body").addEventListener("click",(e=>{e.target.closest(".popup-zoom__img")||(t.classList.add("off"),s.classList.remove("_lock"))})),t.querySelector(".popup-zoom__close").addEventListener("click",(()=>{t.classList.add("off"),s.classList.remove("_lock")}))},949:function(){const e=[{coil:50,price:100,percentages:10},{coil:50,price:110,percentages:10},{coil:50,price:120,percentages:10},{coil:50,price:130,percentages:10},{coil:50,price:140,percentages:10},{coil:50,price:150,percentages:10},{coil:46,price:100,percentages:15},{coil:46,price:110,percentages:15}],t=[{price:20},{price:21},{price:22},{price:23}],s=[{price:10}],r=[{price:31},{price:32},{price:33},{price:34},{price:35},{price:36}],o=(e,t)=>{e.forEach((e=>{e.classList.remove("_active")})),t.classList.add("_active")},c=document.querySelector(".insulators-settings-order-wires__color-block"),n=document.querySelector(".insulators-settings-order-wires__checkbox span"),i=document.querySelectorAll(".insulators-settings-order-wires__border"),a=document.querySelectorAll(".insulators-settings-order-wires__colors"),l=document.querySelectorAll(".insulators-settings-order-wires-item"),d=a[0].querySelectorAll(".insulators-settings-order-wires-item");a[1].querySelectorAll(".insulators-settings-order-wires-item");let p=!1,u=0,_=0;try{n.addEventListener("click",(()=>{c.classList.contains("_active")?(p=!1,u=0,_=0):(o(l,l[0]),i[1].classList.remove("_active"),a[1].classList.remove("_active"),i[0].classList.add("_active"),a[0].classList.add("_active"),p=!0),c.classList.toggle("_active"),z()})),i[0].addEventListener("click",(()=>{i[1].classList.remove("_active"),a[1].classList.remove("_active"),i[0].classList.add("_active"),a[0].classList.add("_active"),u=0,_=0,o(l,l[0]),z()})),i[1].addEventListener("click",(()=>{i[0].classList.remove("_active"),a[0].classList.remove("_active"),i[1].classList.add("_active"),a[1].classList.add("_active"),u=1,_=0,o(l,l[d.length]),z()})),l.forEach(((e,t)=>{e.addEventListener("click",(()=>{o(l,l[t]),_=0===u?t:t-d.length,z()}))}))}catch(e){console.log(`Ошибка в блоке Активация выбора изолятора\n${e}`)}const m=document.querySelector(".bushings-settings-order-wires__color-block"),v=document.querySelector(".bushings-settings-order-wires__checkbox span"),f=document.querySelectorAll(".bushings-settings-order-wires-item"),y=document.querySelector(".bushings-settings-order-wires__add"),L=document.querySelector(".bushings-settings-order-wires__quantity"),q=document.querySelector(".bushings-settings-order-wires__remove");let g=!1,b=0;try{v.addEventListener("click",(()=>{m.classList.contains("_active")?g=!1:(o(f,f[0]),L.value=5,g=!0,b=0),m.classList.toggle("_active"),z()})),y.addEventListener("click",(()=>{L.value++,z()})),L.addEventListener("blur",(()=>{(""===L.value||L.value<1)&&(L.value=5),z()})),q.addEventListener("click",(()=>{L.value>1&&(L.value--,z())})),f.forEach(((e,t)=>{e.addEventListener("click",(()=>{o(f,e),b=t,z()}))}))}catch(e){console.log(`Ошибка в блоке Активация выбора втулок\n${e}`)}const S=document.querySelectorAll(".order-wires-component__num"),h=document.querySelectorAll(".order-wires-component__checkbox span"),E=document.querySelectorAll(".order-wires-component__add"),k=document.querySelectorAll(".order-wires-component__quantity"),w=document.querySelectorAll(".order-wires-component__remove");let A=[];h.forEach(((e,t)=>{e.addEventListener("click",(()=>{S[t].classList.contains("_active")?A=A.filter((e=>{if(e.id!==t)return e})):(k[t].value=5,A.push({id:t,q:k[t].value})),S[t].classList.toggle("_active"),z()}))})),E.forEach(((e,t)=>{e.addEventListener("click",(()=>{k[t].value++,A=A.map((e=>e.id===t?{...e,q:k[t].value}:e)),z()}))})),k.forEach(((e,t)=>{e.addEventListener("blur",(()=>{(""===e.value||e.value<1)&&(e.value=5),A=A.map((s=>s.id===t?{...s,q:e.value}:s)),z()}))})),w.forEach(((e,t)=>{e.addEventListener("click",(()=>{k[t].value>1&&k[t].value--,A=A.map((e=>e.id===t?{...e,q:k[t].value}:e)),z()}))}));const $=document.querySelector(".settings-order-wires__sum");let x,C,M=0;const z=()=>{M=0,x=0,C=0,A.forEach(((r,o)=>{let c=r.q/e[r.id].coil,n=r.q%e[r.id].coil,i=0;for(let t=.99;t<c;t++)i+=e[r.id].coil*e[r.id].price;if(i+=Number((n*e[r.id].price*(1+e[r.id].percentages/100)).toFixed(2)),A[o]={...r,total:i},M+=i,0!=p){let e=0;switch(u){case 0:e+=3*r.q*t[_].price;break;case 1:console.log(_,d.length),e+=3*r.q*s[_].price}C+=e,x+=3*r.q,M+=e}})),g&&(M+=L.value*r[b].price),$.textContent=`${Math.ceil(M)} руб`},H=document.querySelector(".popup-form"),O=document.querySelector("body"),T=document.querySelector(".settings-order-wires__buy-btn"),j=document.querySelector(".details-popup-form-body__info"),P=document.querySelector(".details-popup-form-footer__total"),F=document.querySelectorAll(".order-wires-component__name");T.addEventListener("click",(()=>{if(0!=M){H.classList.remove("off"),O.classList.add("_lock");for(let e=0;e<A.length;e++){let t=document.createElement("div");t.classList.add("details-popup-form-body__article"),t.innerHTML=`\n        <span class="details-popup-form-body__title">Провод ретро витой</span>\n        <span class="details-popup-form-body__q">${F[e].textContent}:</span>\n        <span class="details-popup-form-body__q">${A[e].q}</span>\n        <span>(шт)</span>\n        <span class="details-popup-form-body__separator">=</span>\n        <span class="details-popup-form-body__price">${A[e].total}</span>\n        <span>р.</span>\n      `,j.appendChild(t)}if(p){let e=document.createElement("div");e.classList.add("details-popup-form-body__article"),e.innerHTML=`\n        <span class="details-popup-form-body__title">Изоляторы</span>\n        <span class="details-popup-form-body__q">${0==u?"пластиковые":"фарфоровые"} № ${_+1}:</span>\n        <span class="details-popup-form-body__q">${x}</span>\n        <span>(шт)</span>\n        <span class="details-popup-form-body__separator">=</span>\n        <span class="details-popup-form-body__price">${C}</span>\n        <span>р.</span>\n      `,j.appendChild(e)}if(g){let e=document.createElement("div");e.classList.add("details-popup-form-body__article"),e.innerHTML=`\n        <span class="details-popup-form-body__title">Проходные втулки</span>\n        <span class="details-popup-form-body__q">№ ${b+1}:</span>\n        <span class="details-popup-form-body__q">${L.value}</span>\n        <span>(шт)</span>\n        <span class="details-popup-form-body__separator">=</span>\n        <span class="details-popup-form-body__price">${L.value*r[b].price}</span>\n        <span>р.</span>\n      `,j.appendChild(e)}P.textContent=M}}))}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,s),c.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";s(949),s(768)}()}();